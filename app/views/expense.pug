doctype html
html
  head
    title Expense Details | Expenses Tracker
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css", integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH", crossorigin="anonymous")
    style.
      body { background: #f0f2f5; }
      .card { border: none; box-shadow: 0 4px 14px rgba(0,0,0,0.06); }
      .pill { display:inline-block; padding:6px 12px; border-radius:999px; background:#eef2f7; font-weight:600; }
      .app-navbar { background: linear-gradient(90deg, #0f172a, #0f766e); box-shadow: 0 8px 20px rgba(0,0,0,0.12); padding: 12px 0; border:none; }
      .app-nav-inner { max-width: 1200px; margin: 0 auto; width: 94%; display: flex; align-items: center; gap: 16px; }
      .app-navbar .navbar-brand { color: #f8fafc; letter-spacing: 0.02em; }
      .app-navbar .nav-link { color: rgba(248, 250, 252, 0.88) !important; font-weight: 600; }
      .app-navbar .nav-link:hover { color: #fff !important; }
      .navbar-toggler { border-color: rgba(255,255,255,0.4); }
      .navbar-toggler-icon { filter: invert(1); }
      .btn-logout { background: rgba(255,255,255,0.14); border-color: rgba(255,255,255,0.22); color: #fff; }
      .btn-logout:hover { background: rgba(255,255,255,0.22); color: #fff; }
  body
    include navbar
    - const money = function(val) { return '£' + Number(val || 0).toFixed(2); };
    - const fmtDate = function(d) { return d ? new Date(d).toISOString().slice(0,10) : ''; };
    .container.mt-4
      a(href="/dashboard", class="text-decoration-none mb-3 d-inline-flex align-items-center")
        span.me-2 &#8592;
        span Back to dashboard

      .card.p-4.bg-white.mb-3
        h2.mb-3 Expense details
        dl.row.mb-0
          dt.col-sm-3 Amount
          dd.col-sm-9.fs-4.fw-bold= money(expense.amount)

          dt.col-sm-3 Category
          dd.col-sm-9
            if expense.category
              span.pill= expense.category
            else
              span.text-muted Uncategorized

          dt.col-sm-3 Description
          dd.col-sm-9= expense.description || '—'

          dt.col-sm-3 Date
          dd.col-sm-9= expense.spent_at

          dt.col-sm-3 Currency
          dd.col-sm-9= expense.currency || 'GBR'

      .card.p-4.bg-white
        h3.mb-3 Edit expense
        form(method="POST" action=`/expenses/${expense.id}` class="row g-3")
          .col-md-6
            label.form-label(for="amount") Amount
            input#amount.form-control(type="number" name="amount" step="0.01" min="0" required value=expense.amount)
          .col-md-6
            label.form-label(for="currency") Currency (3-letter)
            input#currency.form-control(type="text" name="currency" maxlength="3" required value=expense.currency || 'GBR')
          .col-md-6
            label.form-label(for="category") Category
            select#category.form-select(name="category_id")
              option(value="") Uncategorized
              each c in categories || []
                if c.id === expense.category_id
                  option(value=c.id selected)= c.name
                else
                  option(value=c.id)= c.name
              option(value="other") Other / New
          .col-md-6
            label.form-label(for="spent_at") Date
            input#spent_at.form-control(type="date" name="spent_at" required value=fmtDate(expense.spent_at))
          .col-12
            label.form-label(for="description") Description
            input#description.form-control(type="text" name="description" value=expense.description)
          .col-12.d-flex.gap-2
            button.btn.btn-primary(type="submit") Update
        .d-flex.gap-2.mt-2
          form(method="POST" action=`/expenses/${expense.id}/delete` onsubmit="return confirm('Delete this expense?');")
            button.btn.btn-outline-danger(type="submit") Delete
